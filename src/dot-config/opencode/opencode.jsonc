{
  "$schema": "https://opencode.ai/config.json",
  "instructions": ["references/common-rules.md"],
  // === Models ===
  "model": "opencode/kimi-k2.5",
  "small_model": "opencode/claude-3-5-haiku", // title gen, lightweight tasks
  "autoupdate": true,
  // === TUI ===
  "tui": {
    "scroll_acceleration": {
      "enabled": true, // macOS-style momentum scrolling
    },
  },
  "plugin": ["opencode-anthropic-auth@0.0.13"],
  // === Permissions ===
  "permission": {
    "read": {
      "*": "allow",
    },
    // never edit/write files that arent in users $HOME directory, to prevent accidental damage to system files,
    // even if user is working in a non-home directory
    "write": {
      "~/*": "allow",
    },
    // allow tool calls that touch only these paths outside the working directory where OpenCode was started
    "external_directory": {
      "~/projects/personal/**": "allow",
    },
    // Only deny the truly catastrophic
    "bash": {
      "sudo *": "deny",
      "rm -rf /": "deny",
      "rm -rf /*": "deny",
      "rm -rf ~": "deny",
      "rm -rf ~/*": "deny",
      ":(){:|:&};:": "deny", // fork bomb, just in case
    },
  },

  // === MCP Servers ===
  "mcp": {
    "next-devtools": {
      "type": "local",
      "command": ["npx", "-y", "next-devtools-mcp@latest"],
    },
    "chrome-devtools": {
      "type": "local",
      "command": ["npx", "-y", "chrome-devtools-mcp@latest"],
    },
    // Docs lookup for libraries - https://context7.com
    "context7": {
      "type": "remote",
      "url": "https://mcp.context7.com/mcp",
    },
    // Web fetching - MCP official server (Python via uvx)
    "fetch": {
      "type": "local",
      "command": ["uvx", "mcp-server-fetch"],
    },
  },
}
